(this["webpackJsonpbarcode-demo"]=this["webpackJsonpbarcode-demo"]||[]).push([[4],{38:function(e,t,c){"use strict";c.r(t);var n=c(9),a=c(0),o=c(36),r=c.n(o),s=c(2),d=c(15),i=c(37),u=c(1),j=function(e){var t=e.error;return Object(u.jsx)("div",{className:"skeleton__video",children:t?"":Object(u.jsx)("div",{className:"skeleton__video--loading",children:Object(u.jsx)(i.a,{})})})},b=Object(s.f)((function(e){var t=e.history,c=Object(a.useState)(!1),o=Object(n.a)(c,2),s=o[0],i=o[1],b=Object(a.useState)(!1),l=Object(n.a)(b,2),p=l[0],v=l[1],O=Object(a.useState)(0),f=Object(n.a)(O,2),h=f[0],m=f[1],x=Object(a.useState)(null),_=Object(n.a)(x,2),S=_[0],g=_[1],k=function(e){r.a.stop(),"not-found"===e?t.push("/product/".concat(e,"?code=").concat(S)):t.push("/product/".concat(e))},N=function e(t){r.a.offDetected(e),fetch("https://world.openfoodfacts.org/api/v0/product/".concat(t.codeResult.code,".json")).then((function(e){return e.json()})).then((function(e){return D(e)}))},D=function(e){var t=e.status,c=e.code;g(c),m((function(e){return e+1})),1===t?k(c):r.a.onDetected(N)};return Object(a.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(r.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#video")},numOfWorkers:1,locate:!0,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","code_128_reader"]}},(function(e){e?v(!0):(r.a.start(),i(!0))})),r.a.onDetected(N))}),[]),Object(a.useEffect)((function(){h>3&&k("not-found")}),[h]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"video__explanation",children:Object(u.jsxs)("p",{children:["Scan a product's barcode"," ",Object(u.jsx)("span",{role:"img","aria-label":"apple",children:"\ud83c\udf4e"})]})}),Object(u.jsx)("div",{className:"video__container",children:p?Object(u.jsx)("div",{className:"skeleton__unsopported",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Your device does not support camera access "}),Object(u.jsx)("p",{children:"You can enter the barcode below"}),Object(u.jsx)(d.a,{})]})}):Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"video",id:"video"}),s?"":Object(u.jsx)(j,{})]})})]})}));t.default=b}}]);
//# sourceMappingURL=4.ee7a185b.chunk.js.map